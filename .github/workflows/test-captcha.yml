name: Simple CAPTCHA Test

on:
  workflow_dispatch:
    inputs:
      target_url:
        description: 'URL to test'
        required: true
        default: 'https://www.google.com/recaptcha/api2/demo'

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install Chrome and ChromeDriver (Simple)
      run: |
        # Install Chrome
        curl -sSL https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb -o chrome.deb
        sudo apt-get install -y ./chrome.deb
        
        # Install ChromeDriver using webdriver-manager (handles version automatically)
        pip install webdriver-manager selenium
    - name: Upload result
      uses: actions/upload-artifact@v4
      with:
        name: test-result
        path: test_result.png